CREATE TABLE [dbo].[CATEGORIAS] (
    [ID]        INT          IDENTITY (1, 1) NOT NULL,
    [NOME]      VARCHAR (30) NOT NULL,
    [DESCRICAO] VARCHAR (50) NOT NULL,
    PRIMARY KEY CLUSTERED ([ID] ASC),
    CONSTRAINT [UQ_NOME_CATEGORIAS] UNIQUE NONCLUSTERED ([NOME] ASC)
);

CREATE TABLE [dbo].[CLIENTES] (
    [ID]              INT           IDENTITY (1, 1) NOT NULL,
    [NOME]            VARCHAR (30)  NOT NULL,
    [SOBRENOME]       VARCHAR (50)  NOT NULL,
    [RG]              VARCHAR (11)  NOT NULL,
    [CPF]             VARCHAR (14)  NOT NULL,
    [TELEFONE]        VARCHAR (45)  NOT NULL,
    [EMAIL]           VARCHAR (100) NOT NULL,
    [GENERO]          INT           NOT NULL,
    [DATA_NASCIMENTO] DATE          NOT NULL,
    [IDADE]           INT           NOT NULL,
    PRIMARY KEY CLUSTERED ([ID] ASC),
    CONSTRAINT [UQ_CLIENTES_EMAIL] UNIQUE NONCLUSTERED ([EMAIL] ASC),
    CONSTRAINT [UQ_CLIENTES_CPF] UNIQUE NONCLUSTERED ([CPF] ASC),
    CONSTRAINT [UQ_CLIENTES_RG] UNIQUE NONCLUSTERED ([RG] ASC)
);
CREATE TABLE [dbo].[ESTADOS] (
    [ID]          INT          IDENTITY (1, 1) NOT NULL,
    [NOME_ESTADO] VARCHAR (45) NOT NULL,
    [SIGLA]       VARCHAR (2)  NOT NULL,
    PRIMARY KEY CLUSTERED ([ID] ASC),
    CONSTRAINT [UQ_ESTADOS_SIGLA] UNIQUE NONCLUSTERED ([SIGLA] ASC)
);


CREATE TABLE [dbo].[ENDERECOS] (
    [ID]               INT          IDENTITY (1, 1) NOT NULL,
    [CEP]              VARCHAR (40) NOT NULL,
    [NUMERO_CASA]      VARCHAR (10) NOT NULL,
    [BAIRRO]           VARCHAR (30) NOT NULL,
    [CIDADE]           VARCHAR (30) NOT NULL,
    [COMPLEMENTO]      VARCHAR (30) NOT NULL,
    [PONTO_REFERENCIA] VARCHAR (30) NOT NULL,
    [ESTADO_ID]        INT          NOT NULL,
    [RUA]              VARCHAR (30) NULL,
    PRIMARY KEY CLUSTERED ([ID] ASC),
    CONSTRAINT [FK_ENDERECOS_ESTADO] FOREIGN KEY ([ESTADO_ID]) REFERENCES [dbo].[ESTADOS] ([ID])
);
CREATE TABLE [dbo].[FORNECEDORES] (
    [ID]           INT          IDENTITY (1, 1) NOT NULL,
    [RAZAO_SOCIAL] VARCHAR (45) NOT NULL,
    [CNPJ]         VARCHAR (45) NOT NULL,
    [NOME_CONTATO] VARCHAR (45) NOT NULL,
    [TELEFONE]     VARCHAR (45) NOT NULL,
    [EMAIL]        VARCHAR (45) NOT NULL,
    PRIMARY KEY CLUSTERED ([ID] ASC),
    CONSTRAINT [UQ_FORNECEDORES_CNPJ] UNIQUE NONCLUSTERED ([CNPJ] ASC),
    CONSTRAINT [UQ_FORNECEDORES_EMAIL] UNIQUE NONCLUSTERED ([EMAIL] ASC)
);

CREATE TABLE [dbo].[FUNCIONARIOS] (
    [ID]              INT          IDENTITY (1, 1) NOT NULL,
    [NOME]            VARCHAR (30) NOT NULL,
    [SOBRENOME]       VARCHAR (50) NOT NULL,
    [CPF]             VARCHAR (14) NOT NULL,
    [RG]              VARCHAR (45) NOT NULL,
    [TELEFONE]        VARCHAR (45) NOT NULL,
    [EMAIL]           VARCHAR (45) NOT NULL,
    [SENHA]           VARCHAR (45) NOT NULL,
    [GENERO]          INT          NOT NULL,
    [DATA_NASCIMENTO] DATE         NOT NULL,
    [IDADE]           INT          NOT NULL,
    [NIVEL_ACESSO]    INT          NOT NULL,
    [ENDERECO_ID]     INT          NOT NULL,
    PRIMARY KEY CLUSTERED ([ID] ASC),
    CONSTRAINT [UQ_FUNCIONARIOS_CPF] UNIQUE NONCLUSTERED ([CPF] ASC),
    CONSTRAINT [UQ_FUNCIONARIOS_EMAIL] UNIQUE NONCLUSTERED ([EMAIL] ASC),
    CONSTRAINT [FK_FUNCIONARIOS_ENDERECO] FOREIGN KEY ([ENDERECO_ID]) REFERENCES [dbo].[ENDERECOS] ([ID])
);
CREATE TABLE [dbo].[PRODUTOS] (
    [ID]            INT           IDENTITY (1, 1) NOT NULL,
    [NOME]          VARCHAR (100) NOT NULL,
    [DESCRICAO]     VARCHAR (200) NOT NULL,
    [QTD_ESTOQUE]   INT           NOT NULL,
    [VALOR]         FLOAT (53)    NOT NULL,
    [FORNECEDOR_ID] INT           NOT NULL,
    [CATEGORIA_ID]  INT           NOT NULL,
    PRIMARY KEY CLUSTERED ([ID] ASC),
    CONSTRAINT [FK_PRODUTOS_FORNECEDOR_ID] FOREIGN KEY ([FORNECEDOR_ID]) REFERENCES [dbo].[FORNECEDORES] ([ID]),
    CONSTRAINT [FK_PRODUTOS_CATEGORIAS_ID] FOREIGN KEY ([CATEGORIA_ID]) REFERENCES [dbo].[CATEGORIAS] ([ID])
);

CREATE TABLE [dbo].[PRODUTOS_SAIDA] (
    [PRODUTOS_ID]    INT        NOT NULL,
    [SAIDA_ID]       INT        NOT NULL,
    [QUATIDADE]      FLOAT (53) NOT NULL,
    [VALOR_UNITARIO] FLOAT (53) NOT NULL,
    PRIMARY KEY CLUSTERED ([PRODUTOS_ID] ASC, [SAIDA_ID] ASC),
    CONSTRAINT [FK_PRODUTOS_SAIDA_PRODUTOS] FOREIGN KEY ([PRODUTOS_ID]) REFERENCES [dbo].[PRODUTOS] ([ID]),
    CONSTRAINT [FK_PRODUTOS_SAIDA_SAIDA] FOREIGN KEY ([SAIDA_ID]) REFERENCES [dbo].[SAIDAS] ([ID])
);

CREATE TABLE [dbo].[SAIDAS] (
    [ID]              INT           IDENTITY (1, 1) NOT NULL,
    [VALOR]           FLOAT (53)    NOT NULL,
    [CLIENTE_ID]      INT           NOT NULL,
    [FUNCIONARIOS_ID] INT           NOT NULL,
    [DATA_SAIDA]      DATETIME2 (7) DEFAULT (getdate()) NOT NULL,
    [FORMA_PAGAMENTO] INT           NOT NULL,
    PRIMARY KEY CLUSTERED ([ID] ASC),
    CONSTRAINT [FK_SAIDAS_FUNCIONARIO] FOREIGN KEY ([FUNCIONARIOS_ID]) REFERENCES [dbo].[FUNCIONARIOS] ([ID]),
    CONSTRAINT [FK_SAIDAS_CLIENTE] FOREIGN KEY ([CLIENTE_ID]) REFERENCES [dbo].[CLIENTES] ([ID])
);



